<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>TourManagerAPI - Documentation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700" rel="stylesheet">

  <!-- External Stylesheet -->
  <link rel="stylesheet" href="styles.css">

  <!-- Redoc Script -->
  <script src="https://cdn.redocly.com/redoc/v2.4.0/bundles/redoc.standalone.js"></script>
</head>
<body>
  <!-- Navbar with Hamburger -->
  <div class="navbar">
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div class="nav-title">Docs</div>
  </div>

  <!-- Slide-out Navigation Menu -->
  <div class="nav-links" id="navMenu">
    <a href="index.html">Home</a>
    <a href="docs.html">API Docs</a>
    <!-- Add more links as needed -->
  </div>

  <!-- Safe-area container and Redoc wrapper -->
  <div class="safe-area">
    <div id="redoc"></div>
  </div>

  <!-- Static OpenAPI Spec -->
  <script id="openapi-spec" type="application/json">
{
  "openapi": "3.1.0",
  "info": {
    "title": "TourManagerAPI",
    "description": "Orchestrating Concert Data Visualization.",
    "version": "1.2.0"
  },
  "paths": {
    "/search/artists/": {
      "get": {
         "tags": ["Artist Search"],
         "summary": "Search for an artist",
         "description": "Searches for an artist by name using the local database and external sources to enrich results. The process includes:\n1. Sanitizing the input.\n2. Querying the local database.\n3. Concurrently querying external sources to enrich results.\n4. Merging and processing the results.\n5. Applying ranking, deduplication, and auto-match logic.\n\nReturns a JSON response containing either a matched artist or a list of alternatives.",
         "operationId": "search_by_artist_search_artists__get",
         "security": [{"APIKeyHeader": []}],
         "parameters": [{
            "name": "artist_name",
            "in": "query",
            "required": true,
            "schema": {"type": "string", "minLength": 1, "maxLength": 100, "description": "Artist name", "title": "Artist Name"},
            "description": "Artist name"
         }],
         "responses": {
           "200": {
              "description": "Successful Response",
              "content": {"application/json": {"schema": {"type": "object", "title": "Response Search By Artist Search Artists Get"}}}
           },
           "404": {"description": "Not Found"},
           "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}},
           "500": {"description": "Internal Server Error"}
         }
      }
    },
    "/search/locations/": {
      "get": {
         "tags": ["Location Search"],
         "summary": "Search for locations",
         "description": "Search for locations using various criteria. Supports searches by:\n- Place names (cities, states, countries)\n- Geographic identifiers (geo_id)\n- Coordinates (lat, lon) with proximity filtering if provided.\n\nWhen no query is provided, the external source calls omit the keyword.",
         "operationId": "search_locations_search_locations__get",
         "security": [{"APIKeyHeader": []}],
         "parameters": [
           {"name": "query", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Place name for location search", "title": "Query"}},
           {"name": "geo_id", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Geographic identifier", "title": "Geo Id"}},
           {"name": "lat", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Latitude for proximity search", "title": "Lat"}},
           {"name": "lon", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Longitude for proximity search", "title": "Lon"}},
           {"name": "radius", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Search radius in meters", "default": 5000, "title": "Radius"}},
           {"name": "force_refresh", "in": "query", "required": false, "schema": {"type": "boolean", "description": "Force refresh data, bypass cache", "default": false, "title": "Force Refresh"}}
         ],
         "responses": {
           "200": {"description": "Successful Response", "content": {"application/json": {"schema": {"type": "object", "title": "Response Search Locations Search Locations Get"}}}},
           "404": {"description": "Location not found"},
           "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}},
           "500": {"description": "Internal Server Error"}
         }
      }
    },
    "/search/venues/": {
      "get": {
         "tags": ["Venue Search"],
         "summary": "Search for venues by name or location",
         "description": "Search for venues in your local database by name, optionally filtering by proximity if latitude/longitude are provided. Additional matches are fetched to enrich results. If lat/lon are provided, they are used for location-based searching.",
         "operationId": "search_venues_search_venues__get",
         "security": [{"APIKeyHeader": []}],
         "parameters": [
           {"name": "name", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Venue name for fuzzy search", "title": "Name"}},
           {"name": "lat", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Latitude for proximity search", "title": "Lat"}},
           {"name": "lon", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Longitude for proximity search", "title": "Lon"}},
           {"name": "radius", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Search radius in meters", "default": 5000, "title": "Radius"}},
           {"name": "filter_by_distance", "in": "query", "required": false, "schema": {"type": "boolean", "description": "Apply proximity filtering if true", "default": true, "title": "Filter By Distance"}},
           {"name": "date", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Date (YYYY-MM-DD) for historical venue lookup", "title": "Date"}}
         ],
         "responses": {
           "200": {"description": "Successful Response", "content": {"application/json": {"schema": {"type": "object", "title": "Response Search Venues Search Venues Get"}}}},
           "404": {"description": "Venue not found"},
           "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}},
           "500": {"description": "Internal Server Error"}
         }
      }
    },
    "/search/venues/near": {
      "get": {
         "tags": ["Venue Search"],
         "summary": "Search for venues near a location",
         "description": "A specialized endpoint for searching venues near a location, focusing on coordinate-based searching. If a venue name is specified, results are filtered accordingly.",
         "operationId": "venues_near_me_search_venues_near_get",
         "security": [{"APIKeyHeader": []}],
         "parameters": [
           {"name": "lat", "in": "query", "required": true, "schema": {"type": "number", "description": "Latitude", "title": "Lat"}},
           {"name": "lon", "in": "query", "required": true, "schema": {"type": "number", "description": "Longitude", "title": "Lon"}},
           {"name": "radius", "in": "query", "required": false, "schema": {"type": "number", "description": "Radius in meters", "default": 5000, "title": "Radius"}},
           {"name": "name", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Optional venue name to filter results", "title": "Name"}}
         ],
         "responses": {
           "200": {"description": "Successful Response", "content": {"application/json": {"schema": {"type": "object", "title": "Response Venues Near Me Search Venues Near Get"}}}},
           "404": {"description": "Venue not found"},
           "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}},
           "500": {"description": "Internal Server Error"}
         }
      }
    },
    "/search/universal/": {
      "get": {
         "tags": ["Universal Search"],
         "summary": "Universal search for artists, venues, and locations",
         "description": "Perform a universal search across artists, venues, and locations.\n\n- For artists, it calls the artist search.\n- For venues, it calls the venue search.\n- For locations, it calls the location search using query and coordinates.\n\nReturns a JSON response with aggregated results under keys \"artists\", \"venues\", and \"locations\".",
         "operationId": "universal_search_search_universal__get",
         "security": [{"APIKeyHeader": []}],
         "parameters": [
           {"name": "query", "in": "query", "required": true, "schema": {"type": "string", "description": "Search query (e.g., venue or artist name)", "title": "Query"}},
           {"name": "type", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Entity type to search: 'artist', 'venue', 'location', or 'all'", "default": "all", "title": "Type"}},
           {"name": "lat", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Latitude for venue or location search", "title": "Lat"}},
           {"name": "lon", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Longitude for venue or location search", "title": "Lon"}},
           {"name": "radius", "in": "query", "required": false, "schema": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Search radius in meters (venues/locations only)", "default": 5000, "title": "Radius"}},
           {"name": "date", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Date (YYYY-MM-DD) for historical venue lookup (venues only)", "title": "Date"}}
         ],
         "responses": {
           "200": {"description": "Successful Response", "content": {"application/json": {"schema": {"type": "object", "title": "Response Universal Search Search Universal Get"}}}},
           "404": {"description": "No results found"},
           "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}},
           "500": {"description": "Internal Server Error"}
         }
      }
    }
  },
  "components": {
    "schemas": {
      "HTTPValidationError": {
        "type": "object",
        "title": "HTTPValidationError",
        "properties": {
          "detail": {
            "type": "array",
            "title": "Detail",
            "items": {"$ref": "#/components/schemas/ValidationError"}
          }
        }
      },
      "ValidationError": {
        "type": "object",
        "title": "ValidationError",
        "required": ["loc", "msg", "type"],
        "properties": {
          "loc": {
            "type": "array",
            "title": "Location",
            "items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}
          },
          "msg": {"type": "string", "title": "Message"},
          "type": {"type": "string", "title": "Error Type"}
        }
      }
    },
    "securitySchemes": {
      "APIKeyHeader": {
        "type": "apiKey",
        "in": "header",
        "name": "x-api-key"
      }
    }
  },
  "security": [{"APIKeyHeader": []}]
}
  </script>

  <script>
    // Initialize Redoc once DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      const spec = JSON.parse(document.getElementById('openapi-spec').innerText);
      Redoc.init(spec, {}, document.getElementById('redoc'));
    });

    // Hamburger toggle logic
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      navMenu.classList.toggle('open');
    });
  </script>
</body>
</html>
